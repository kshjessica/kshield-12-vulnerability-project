{% extends "base.html" %} {% block content %}
<div class="container mt-5">
  <h1 class="mb-4">{{ title }}</h1>
  <p>
    아래는 SQL Injection 관련 취약한 코드 예시입니다. 주어진 코드의 취약점을
    찾아내고 이를 수정하여 코드를 안전하게 만드세요.
  </p>
  <pre class="p-3 border bg-light">
<code class="language-html">{{ content | safe }}</code>
  </pre>

  <hr />

  <form method="post">
    {% csrf_token %}
    <div class="form-group">
      <label for="answer"><strong>답</strong></label>
      <textarea
        name="answer"
        id="answer"
        rows="5"
        class="form-control"
        placeholder="수정된 코드를 여기에 입력하세요(해당 코드 라인만 입력)"
        style="font-family: monospace; font-size: 1em"
      ></textarea>
    </div>
    <button type="submit" class="btn btn-primary">제출</button>
  </form>

  <hr />

  {% if successful %}
  <div class="alert alert-success mt-3">
    정답입니다! 코드를 안전하게 수정하였습니다.
  </div>
  <a
    href="{% url 'secure_coding_question_explanation' type %}"
    class="btn btn-success mt-3"
    >설명 보러가기</a
  >
  <a href="{% url 'solve' %}" class="btn btn-secondary mt-3"
    >다른 문제 풀어보기</a
  >
  {% elif unsuccessful %}
  <div class="alert alert-danger mt-3">
    수정이 실패했습니다. 다시 시도해보세요.
  </div>
  <button
    class="btn btn-link mt-3"
    onclick="document.getElementById('hint').style.display='block'"
  >
    힌트 보기
  </button>
  <div id="hint" class="alert alert-warning mt-3" style="display: none">
    <pre>
<code class="language-html" style="color: black">{{ hint }}</code>
    </pre>
  </div>
  {% endif %}
</div>
{% endblock %}
