{% extends "base.html" %} {% block content %}
<div class="container mt-5">
  <h1 class="mb-4">{{ title }}</h1>
  <p>
    다음은 사용자 입력값을 받아 원시 쿼리를 구성해 처리하는 안전하지 않는 코드
    예시입니다. 안전한 코드가 될 수 있도록 취약점을 유발하는 코드 라인을
    수정하세요.
  </p>
  <pre class="p-3 border bg-light">
<code>{{ content | safe }}</code>
  </pre>
  <form method="post">
    {% csrf_token %}
    <div class="form-group">
      <label for="answer">답</label>
      <textarea
        name="answer"
        id="answer"
        rows="1"
        class="form-control"
        placeholder="수정된 코드 라인만 입력"
      ></textarea>
    </div>
    <button type="submit" class="btn btn-primary">제출</button>
  </form>

  {% if successful %}
  <div class="alert alert-success mt-3">
    정답입니다! 코드를 안전하게 수정하였습니다.
  </div>
  <a
    href="{% url 'secure_coding_question_explanation' type %}"
    class="btn btn-success mt-3"
    >설명 보러가기</a
  >
  <a href="{% url 'solve' %}" class="btn btn-secondary mt-3"
    >다른 문제 풀어보기</a
  >
  {% elif unsuccessful %}
  <div class="alert alert-danger mt-3">
    수정이 실패했습니다. 다시 시도해보세요.
  </div>
  <button
    class="btn btn-link mt-3"
    onclick="document.getElementById('hint').style.display='block'"
  >
    힌트 보기
  </button>
  <div id="hint" class="alert alert-warning mt-3" style="display: none">
    <pre>
<code class="language-html" style="color: black">{{ hint }}</code>
    </pre>
  </div>
  {% endif %}
</div>
{% endblock %}
